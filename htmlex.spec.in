%define name	@PACKAGE@
%define version @VERSION@
%define release 1
%define builddir $RPM_BUILD_DIR/%{name}-%{version}

Name:		%{name}
Version:	%{version}
Release:	%{release}
Vendor:		David A. Capello
Packager:	David A. Capello dacap@users.sourceforge.net
URL:		http://htmlex.sourceforge.net
Source:         %{name}-%{version}.tar.gz
#Patch:		
Group:		Application/Generic
Copyright:	GPL
#Icon:		
#Requires:	
BuildRoot:	/var/tmp/%{name}-%{version}
Summary:	a powerful hypertext markup language preprocessor
%description
htmlex is a small but powerful HTML preprocesor, which you can have some
advantages relative to the conventional format of the .html files. Besides,
as htmlex is fully compatible with the standard HTML syntax, you can use any
HTML file that you have, and convert it to .htex.

%prep
%setup -n %{name}-%{version} 
#%patch -p1

%build
CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%{_prefix}
make

%install
if [ -d $RPM_BUILD_ROOT ]; then rm -rf $RPM_BUILD_ROOT; fi
mkdir -p $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT
# Build the file-list automagically :)
cd $RPM_BUILD_ROOT
find . -type d | sed '1,2d;s,^\.,\%attr(-\,root\,root) \%dir ,' > $RPM_BUILD_DIR/file.list.%{name}
find . -type f | sed 's,^\.,\%attr(-\,root\,root) ,' >> $RPM_BUILD_DIR/file.list.%{name}
find . -type l | sed 's,^\.,\%attr(-\,root\,root) ,' >> $RPM_BUILD_DIR/file.list.%{name}

%clean
rm -rf $RPM_BUILD_ROOT
rm ../file.list.%{name}

%files -f ../file.list.%{name}
%doc README
